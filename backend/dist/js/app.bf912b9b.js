(function(){"use strict";var e={2777:function(e,t,i){var l=i(5130),a=i(6768);const s={id:"app"};function o(e,t,i,l,o,n){const r=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(r)])}var n={name:"App"},r=i(1241);const c=(0,r.A)(n,[["render",o]]);var u=c,d=i(1387);const p=e=>((0,a.Qi)("data-v-40e35637"),e=e(),(0,a.jt)(),e),m={class:"home"},h=p((()=>(0,a.Lk)("h1",null,"Microfluidic Droplets Identification and Analysis (MDIA)",-1))),g={class:"modules-container"},f=p((()=>(0,a.Lk)("h2",null,"Machine Identification",-1))),v=p((()=>(0,a.Lk)("p",null,"Upload and identify microfluidic droplets with our powerful tool.",-1))),k=[f,v],L=p((()=>(0,a.Lk)("div",{class:"image-container"},[(0,a.Lk)("img",{src:"/out.gif",alt:"Image Recognition"})],-1))),y=p((()=>(0,a.Lk)("div",{class:"image-container"},[(0,a.Lk)("img",{src:"/Transfer Learning.jpg",alt:"Other Module"})],-1))),b=p((()=>(0,a.Lk)("h2",null,"Transfer Learning",-1))),S=p((()=>(0,a.Lk)("p",null,"Explore more features for various functionalities.",-1))),C=[b,S];function z(e,t,i,l,s,o){return(0,a.uX)(),(0,a.CE)("div",m,[h,(0,a.Lk)("div",g,[(0,a.Lk)("div",{class:"module",onClick:t[0]||(t[0]=e=>o.navigateTo("MachineIdentification"))},k),L,y,(0,a.Lk)("div",{class:"module",onClick:t[1]||(t[1]=e=>o.navigateTo("TransferLearning"))},C)])])}i(4114);var I={name:"HomePage",methods:{navigateTo(e){this.$router.push({name:e})}}};const w=(0,r.A)(I,[["render",z],["__scopeId","data-v-40e35637"]]);var E=w,F=i(4232);const A=e=>((0,a.Qi)("data-v-4f47587f"),e=e(),(0,a.jt)(),e),D={class:"home"},M={key:0,class:"loading-overlay"},$=A((()=>(0,a.Lk)("div",{class:"spinner"},null,-1))),U=[$],X={key:1,class:"step-one-title"},R={key:2,class:"step-one-container step-module"},P=A((()=>(0,a.Lk)("div",{class:"instructions"},[(0,a.Lk)("h2",null,"Instructions"),(0,a.Lk)("p",null,"Please select one of the following modes:"),(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,"Cell encapsulation:"),(0,a.eW)(' Detect, analyse, and count the number of droplets with encapsulated cells. You can select the "Single-cell encapsulated" option to perform an analysis.')]),(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,"Double emulsion:"),(0,a.eW)("Detect, analyse, and count both double emulsions and single droplets.")]),(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,"Single droplet:"),(0,a.eW)("Detect, analyse, and count individual droplets.")])])],-1))),V=A((()=>(0,a.Lk)("span",null,"Cell encapsulation",-1))),_=A((()=>(0,a.Lk)("label",{for:"single-cell-checkbox"},"Single-cell encapsulated",-1))),B={key:3,class:"step-one-title"},q={key:4,class:"step-two-container step-module"},Q=A((()=>(0,a.Lk)("div",{class:"instructions"},[(0,a.Lk)("h2",null,"Instructions"),(0,a.Lk)("p",null,"Please select an algorithm based on your analysis needs:"),(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,"Deformable DETR:"),(0,a.eW)(" A deep learning algorithm that delivers superior accuracy and flexibility for object detection across a wide range of scenarios.")]),(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,"Edge detection:"),(0,a.eW)(" A traditional image recognition method that offers faster detection speeds but may sacrifice some accuracy.")])])],-1))),x={key:5},T=A((()=>(0,a.Lk)("h1",{class:"step-three-title"},"Please upload an image or video",-1))),j={class:"modules-container"},O={class:"module"},K=(0,a.Fv)('<div class="instructions" data-v-4f47587f><h2 data-v-4f47587f>Instructions</h2><p data-v-4f47587f>Please follow the steps below to upload your file:</p><ul data-v-4f47587f><li data-v-4f47587f>Click the <strong data-v-4f47587f>&quot;Select an image or video&quot;</strong> button to choose your file.</li><li data-v-4f47587f>After selecting, confirm by clicking <strong data-v-4f47587f>&quot;Upload&quot;</strong>.</li><li data-v-4f47587f>Ensure your image has a resolution of at least <strong data-v-4f47587f>1000×1000</strong> and is smaller than <strong data-v-4f47587f>3MB</strong> in size.</li><li data-v-4f47587f>For videos, please ensure a resolution of at least <strong data-v-4f47587f>1000×1000</strong> and a size smaller than <strong data-v-4f47587f>10MB</strong>.</li></ul></div>',1),W={class:"content"},H={class:"button-container"},J={key:0},Y={key:1,class:"images-container"},G={key:0,class:"image-wrapper"},N=A((()=>(0,a.Lk)("h3",null,"Original File:",-1))),Z=["src"],ee=["src"],te={key:2},ie=["disabled"];function le(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",D,[o.isLoading?((0,a.uX)(),(0,a.CE)("div",M,U)):(0,a.Q3)("",!0),1===o.step?((0,a.uX)(),(0,a.CE)("h1",X,"Please choose a recognition mode")):(0,a.Q3)("",!0),1===o.step?((0,a.uX)(),(0,a.CE)("div",R,[P,(0,a.Lk)("div",{class:"step-one-option",onClick:t[2]||(t[2]=e=>n.selectMode("Cell encapsulation")),style:{position:"relative"}},[V,(0,a.Lk)("div",{class:"checkbox-container",onClick:t[1]||(t[1]=(0,l.D$)((()=>{}),["stop"]))},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>o.isSingleCellEncapsulated=e),id:"single-cell-checkbox"},null,512),[[l.lH,o.isSingleCellEncapsulated]]),_])]),(0,a.Lk)("div",{class:"step-one-option",onClick:t[3]||(t[3]=e=>n.selectMode("Double emulsion"))},"Double emulsion"),(0,a.Lk)("div",{class:"step-one-option",onClick:t[4]||(t[4]=e=>n.selectMode("Single droplet"))},"Single droplet")])):(0,a.Q3)("",!0),2===o.step&&"Single droplet"===o.selectedMode?((0,a.uX)(),(0,a.CE)("h1",B,"Please choose an algorithm")):(0,a.Q3)("",!0),2===o.step&&"Single droplet"===o.selectedMode?((0,a.uX)(),(0,a.CE)("div",q,[Q,(0,a.Lk)("div",{class:"step-one-option",onClick:t[5]||(t[5]=e=>n.selectAlgorithm("Deformable DETR"))},"Deformable DETR"),(0,a.Lk)("div",{class:"step-one-option",onClick:t[6]||(t[6]=e=>n.selectAlgorithm("Edge detection"))},"Edge detection"),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.goBack&&n.goBack(...e)),class:"back-button"},"Back")])):(0,a.Q3)("",!0),3===o.step||2===o.step&&"Single droplet"!==o.selectedMode?((0,a.uX)(),(0,a.CE)("div",x,[T,(0,a.Lk)("div",j,[(0,a.Lk)("div",O,[K,(0,a.Lk)("input",{type:"file",accept:"image/bmp,image/jpeg,image/jpg,image/png,image/tiff,image/tif,video/mp4,video/avi,video/webm",onChange:t[8]||(t[8]=(...e)=>n.onFileChange&&n.onFileChange(...e)),class:"file-input",ref:"fileInput"},null,544),(0,a.Lk)("div",W,[(0,a.Lk)("div",H,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.triggerFileInput&&n.triggerFileInput(...e))},"Select an image or video"),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.uploadFile&&n.uploadFile(...e))},"Upload")]),o.selectedFile?((0,a.uX)(),(0,a.CE)("p",J,"Selected file: "+(0,F.v_)(o.selectedFile.name),1)):(0,a.Q3)("",!0),o.imageUrl||o.processedImageUrl?((0,a.uX)(),(0,a.CE)("div",Y,[o.imageUrl?((0,a.uX)(),(0,a.CE)("div",G,[N,o.isImage?((0,a.uX)(),(0,a.CE)("img",{key:0,src:o.imageUrl,alt:"Original File",class:"preview-image"},null,8,Z)):(0,a.Q3)("",!0),o.isVideo?((0,a.uX)(),(0,a.CE)("video",{key:1,src:o.imageUrl,controls:"",class:"preview-video"},null,8,ee)):(0,a.Q3)("",!0),o.fileInfo?((0,a.uX)(),(0,a.CE)("p",te,(0,F.v_)(o.fileInfo),1)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.goBackFromUpload&&n.goBackFromUpload(...e)),class:"back-button"},"Back"),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.analyzeFile&&n.analyzeFile(...e)),class:"analysis-button",disabled:!o.isUploaded},"Analysis",8,ie)])])])])):(0,a.Q3)("",!0)])}i(4603),i(7566),i(8721);var ae=i(4373),se={name:"ImageRecognition",data(){return{step:1,selectedMode:null,selectedAlgorithm:null,selectedFile:null,imageUrl:null,fileInfo:null,processedImageUrl:null,uploadedFilename:null,isImage:!1,isVideo:!1,isSingleCellEncapsulated:!1,isUploaded:!1,isLoading:!1}},methods:{selectMode(e){"Cell encapsulation"===e?this.isSingleCellEncapsulated?this.selectedMode="Single-cell encapsulated":this.selectedMode="Cell encapsulation":this.selectedMode=e,this.step="Single droplet"===e?2:3,console.log("Selected mode:",this.selectedMode)},selectAlgorithm(e){this.selectedAlgorithm=e,this.step=3,console.log("Selected Algorithm:",this.selectedAlgorithm)},goBack(){this.step=1},goBackFromUpload(){"Single droplet"===this.selectedMode?this.step=2:this.step=1},triggerFileInput(){this.$refs.fileInput.click()},onFileChange(e){if(this.selectedFile=e.target.files[0],this.isUploaded=!1,this.selectedFile){const e=this.selectedFile.type,t=this.selectedFile.size,i=["image/bmp","image/jpeg","image/jpg","image/png","image/tiff","image/tif"],l=["video/mp4","video/avi","video/webm"],a=i.includes(e)||l.includes(e),s=e.startsWith("image")?3145728:10485760,o=t<=s;if(!a)return alert("Invalid file format. Please select a valid image or video format."),void(this.selectedFile=null);if(!o){const t=e.startsWith("image")?"3MB":"10MB";return alert(`File size exceeds the limit. The maximum allowed size is ${t}.`),void(this.selectedFile=null)}this.imageUrl=URL.createObjectURL(this.selectedFile);const n=e.split("/")[0];if(this.isImage="image"===n,this.isVideo="video"===n,this.isImage){const e=new Image;e.onload=()=>{const t=e.width,i=e.height,l=(this.selectedFile.size/1024).toFixed(2);this.fileInfo=`Resolution: ${t}x${i}, Size: ${l} KB`},e.src=this.imageUrl}else if(this.isVideo){const e=document.createElement("video");e.onloadedmetadata=()=>{const t=e.videoWidth,i=e.videoHeight,l=(this.selectedFile.size/1024).toFixed(2);this.fileInfo=`Resolution: ${t}x${i}, Size: ${l} KB`},e.src=this.imageUrl}}},async uploadFile(){if(!this.selectedFile)return void alert("Please select a file first");const e=new FormData;e.append("file",this.selectedFile),e.append("mode",this.selectedMode),"Single droplet"===this.selectedMode&&e.append("algorithm",this.selectedAlgorithm),this.isLoading=!0;try{const t=await ae.A.post("/api/upload",e,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});alert(`File "${this.selectedFile.name}" is successfully uploaded!`),console.log(t.data),this.uploadedFilename=t.data.file_path,this.isUploaded=!0}catch(t){t.response?400===t.response.status?alert("Upload failed: Invalid file format or size."):alert(`Upload failed: ${t.response.data.message}`):alert("Upload failed: Please check your network connection.")}finally{this.isLoading=!1}},analyzeFile(){if(this.isImage||this.isVideo){const e=this.isImage?"ImageAnalysis":"VideoAnalysis";this.$router.push({name:e,query:{selectedMode:this.selectedMode,selectedAlgorithm:this.selectedAlgorithm,filename:this.uploadedFilename}})}else alert("Please select a valid file first.")}}};const oe=(0,r.A)(se,[["render",le],["__scopeId","data-v-4f47587f"]]);var ne=oe;const re=e=>((0,a.Qi)("data-v-c68d1d7c"),e=e(),(0,a.jt)(),e),ce={class:"home"},ue=re((()=>(0,a.Lk)("h1",null,"Other Module",-1))),de=re((()=>(0,a.Lk)("p",null,"This is the other module page.",-1))),pe=[ue,de];function me(e,t,i,l,s,o){return(0,a.uX)(),(0,a.CE)("div",ce,pe)}var he={name:"OtherModule"};const ge=(0,r.A)(he,[["render",me],["__scopeId","data-v-c68d1d7c"]]);var fe=ge;const ve=e=>((0,a.Qi)("data-v-7fcb4703"),e=e(),(0,a.jt)(),e),ke={class:"image-analysis"},Le=ve((()=>(0,a.Lk)("h1",null,"Image Analysis",-1))),ye={class:"parameter-module"},be=ve((()=>(0,a.Lk)("h2",null,"User-defined parameters",-1))),Se={class:"form-group"},Ce=ve((()=>(0,a.Lk)("label",{for:"actual-size"},"Actual size per pixel:",-1))),ze=ve((()=>(0,a.Lk)("option",{value:"mm"},"mm",-1))),Ie=ve((()=>(0,a.Lk)("option",{value:"μm"},"μm",-1))),we=ve((()=>(0,a.Lk)("option",{value:"nm"},"nm",-1))),Ee=ve((()=>(0,a.Lk)("option",{value:"cm"},"cm",-1))),Fe=[ze,Ie,we,Ee],Ae={class:"buttons-container"},De={class:"main-buttons"},Me={key:0,class:"mode-description-module"},$e={key:1,class:"result-module"},Ue=ve((()=>(0,a.Lk)("h2",null,"Identify the results",-1))),Xe={class:"images-container"},Re=["src"],Pe={key:2,class:"result-module"},Ve=ve((()=>(0,a.Lk)("h2",null,"Statistical results",-1))),_e={class:"result-table"},Be={key:3,class:"no-data"},qe={key:4,class:"loading-overlay"},Qe=ve((()=>(0,a.Lk)("div",{class:"loading-content"},[(0,a.Lk)("p",null,"Loading..."),(0,a.Lk)("div",{class:"spinner"})],-1))),xe=[Qe];function Te(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",ke,[Le,(0,a.Lk)("div",ye,[be,(0,a.Lk)("div",Se,[Ce,(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>o.actualSize=e),id:"actual-size",name:"actual-size",min:"0.1",step:"0.1",onInput:t[1]||(t[1]=(...e)=>n.updateParameters&&n.updateParameters(...e)),onBlur:t[2]||(t[2]=(...e)=>n.validateActualSize&&n.validateActualSize(...e))},null,544),[[l.Jo,o.actualSize]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.unit=e),id:"unit",name:"unit",onChange:t[4]||(t[4]=(...e)=>n.updateParameters&&n.updateParameters(...e))},Fe,544),[[l.u1,o.unit]])])]),(0,a.Lk)("div",Ae,[(0,a.Lk)("div",De,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.visualizationResults&&n.visualizationResults(...e))},"Visualization results"),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.statisticalResults&&n.statisticalResults(...e))},"Statistical results")]),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.goBack&&n.goBack(...e)),class:"back-button"},"Back")]),o.modeDescriptions.length?((0,a.uX)(),(0,a.CE)("div",Me,[(0,a.Lk)("h2",null,"Pattern identification: "+(0,F.v_)(o.selectedMode),1),(0,a.Lk)("div",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.modeDescriptions,((e,t)=>((0,a.uX)(),(0,a.CE)("p",{key:t},(0,F.v_)(e),1)))),128))])])):(0,a.Q3)("",!0),o.showVisualizationResults?((0,a.uX)(),(0,a.CE)("div",$e,[Ue,(0,a.Lk)("div",Xe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.resultImageUrls,((e,i)=>((0,a.uX)(),(0,a.CE)("img",{key:i,src:e,alt:"识别结果",class:"result-image",onError:t[8]||(t[8]=(...e)=>n.handleImageError&&n.handleImageError(...e))},null,40,Re)))),128))])])):(0,a.Q3)("",!0),Array.isArray(o.statisticsData)&&o.statisticsData.length>1?((0,a.uX)(),(0,a.CE)("div",Pe,[Ve,(0,a.Lk)("div",null,[(0,a.Lk)("table",_e,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.statisticsData[0],((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t},(0,F.v_)(e),1)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.statisticsData.slice(1),((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,((e,t)=>((0,a.uX)(),(0,a.CE)("td",{key:t},(0,F.v_)(e),1)))),128))])))),128))])])])])):((0,a.uX)(),(0,a.CE)("div",Be)),o.isLoading?((0,a.uX)(),(0,a.CE)("div",qe,xe)):(0,a.Q3)("",!0)])}var je={name:"ImageAnalysis",props:{selectedAlgorithm:{type:String,required:!1},filename:{type:String,required:!0}},data(){return{actualSize:1,unit:"mm",showVisualizationResults:!1,showStatisticalResults:!1,resultImageUrls:[],statisticsData:[],selectedMode:this.$route.query.selectedMode||this.selectedMode,modeDescriptions:[],isLoading:!1}},methods:{handleImageError(e){e.target.src="path/to/default-image.jpg",console.error("Failed to load image:",e.target.src)},updateModeDescriptions(e=0,t=0){const i=this.selectedMode;this.modeDescriptions="Cell encapsulation"===i?[`Droplet with cell: ${e}`,`Droplet without cell: ${t}`]:"Single-cell encapsulated"===i?[`Droplet with Single cell: ${e}`,`Droplet without cell: ${t}`]:"Double emulsion"===i?[`Double emulsion droplets: ${e}`,`Single droplets: ${t}`]:"Single droplet"===i?[`Single droplets: ${t}`]:[],this.modeDescriptions=[]},updateParameters(){},validateActualSize(){this.actualSize<.1&&(this.actualSize=.1)},goBack(){this.$router.push({name:"MachineIdentification"})},async visualizationResults(){this.isLoading=!0;const e={filename:this.$route.query.filename,selectedMode:this.$route.query.selectedMode,selectedAlgorithm:this.$route.query.selectedAlgorithm,actualSize:this.actualSize,unit:this.unit};try{const t=await ae.A.post("/api/img_visualize",e);console.log("Response data:",t.data),this.resultImageUrls=t.data.image_names.map((e=>`${e}?size=${this.actualSize}&unit=${this.unit}`));const i=t.data.withcount,l=t.data.withoutcount;this.updateModeDescriptions(i,l),console.log("resultImageUrls:",this.resultImageUrls),this.showVisualizationResults=!0}catch(t){console.error("Visualization failed:",t),alert("Failed to load visualization results. Please try again.")}finally{this.isLoading=!1}},async statisticalResults(){this.isLoading=!0;const e={filename:this.$route.query.filename,selectedMode:this.$route.query.selectedMode,selectedAlgorithm:this.$route.query.selectedAlgorithm,actualSize:this.actualSize,unit:this.unit};try{const t=await ae.A.post("/api/img_statistics",e),i=t.data.withcount,l=t.data.withoutcount;this.updateModeDescriptions(i,l),this.statisticsData=t.data.statistics,this.showStatisticalResults=!0}catch(t){console.error("Statistical analysis failed:",t),alert("Failed to load statistical results. Please try again.")}finally{this.isLoading=!1}}}};const Oe=(0,r.A)(je,[["render",Te],["__scopeId","data-v-7fcb4703"]]);var Ke=Oe;const We=e=>((0,a.Qi)("data-v-320ece36"),e=e(),(0,a.jt)(),e),He={class:"video-analysis"},Je=We((()=>(0,a.Lk)("h1",null,"Video Analysis",-1))),Ye={class:"parameter-module"},Ge=We((()=>(0,a.Lk)("h2",null,"User-defined parameters",-1))),Ne={class:"parameters-grid"},Ze={class:"form-group"},et=We((()=>(0,a.Lk)("label",{for:"actual-size",class:"label"},"Actual size per pixel:",-1))),tt={class:"input-group"},it=We((()=>(0,a.Lk)("option",{value:"mm"},"mm",-1))),lt=We((()=>(0,a.Lk)("option",{value:"μm"},"μm",-1))),at=We((()=>(0,a.Lk)("option",{value:"nm"},"nm",-1))),st=We((()=>(0,a.Lk)("option",{value:"cm"},"cm",-1))),ot=[it,lt,at,st],nt={class:"form-group"},rt=We((()=>(0,a.Lk)("label",{for:"time-span",class:"label"},"Real time span of the video (seconds):",-1))),ct={class:"form-group"},ut=We((()=>(0,a.Lk)("label",{for:"flow-direction",class:"label"},"Flow direction:",-1))),dt={class:"input-group flow-direction-group"},pt=We((()=>(0,a.Lk)("option",{value:"left-to-right"},"Left to Right",-1))),mt=We((()=>(0,a.Lk)("option",{value:"right-to-left"},"Right to Left",-1))),ht=We((()=>(0,a.Lk)("option",{value:"top-to-bottom"},"Top to Bottom",-1))),gt=We((()=>(0,a.Lk)("option",{value:"bottom-to-top"},"Bottom to Top",-1))),ft=[pt,mt,ht,gt],vt={class:"form-group"},kt=We((()=>(0,a.Lk)("label",{for:"reference-line",class:"label"},"Reference line location (%):",-1))),Lt={class:"buttons-container"},yt={class:"main-buttons"},bt={key:0,class:"mode-description-module"},St={key:1,class:"result-module"},Ct=We((()=>(0,a.Lk)("h2",null,"Visualization results",-1))),zt=["src"],It={key:0,class:"images-container"},wt=["src"],Et={key:2,class:"result-module"},Ft=We((()=>(0,a.Lk)("h2",null,"Statistical results",-1))),At={class:"result-table"},Dt={key:3,class:"loading-overlay"},Mt=We((()=>(0,a.Lk)("div",{class:"loading-content"},[(0,a.Lk)("p",null,"Loading..."),(0,a.Lk)("div",{class:"spinner"})],-1))),$t=[Mt];function Ut(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",He,[Je,(0,a.Lk)("div",Ye,[Ge,(0,a.Lk)("div",Ne,[(0,a.Lk)("div",Ze,[et,(0,a.Lk)("div",tt,[(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>o.actualSize=e),id:"actual-size",name:"actual-size",min:"0.1",step:"0.1",onInput:t[1]||(t[1]=(...e)=>n.updateParameters&&n.updateParameters(...e)),onBlur:t[2]||(t[2]=(...e)=>n.validateActualSize&&n.validateActualSize(...e))},null,544),[[l.Jo,o.actualSize]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.unit=e),id:"unit",name:"unit",onChange:t[4]||(t[4]=(...e)=>n.updateParameters&&n.updateParameters(...e))},ot,544),[[l.u1,o.unit]])])]),(0,a.Lk)("div",nt,[rt,(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>o.timeSpan=e),id:"time-span",name:"time-span",min:"0.1",step:"0.1",onInput:t[6]||(t[6]=(...e)=>n.updateParameters&&n.updateParameters(...e)),onBlur:t[7]||(t[7]=(...e)=>n.validateTimeSpan&&n.validateTimeSpan(...e))},null,544),[[l.Jo,o.timeSpan]])]),(0,a.Lk)("div",ct,[ut,(0,a.Lk)("div",dt,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.flowDirection=e),id:"flow-direction",name:"flow-direction",onChange:t[9]||(t[9]=(...e)=>n.updateParameters&&n.updateParameters(...e))},ft,544),[[l.u1,o.flowDirection]])])]),(0,a.Lk)("div",vt,[kt,(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>o.referenceLine=e),id:"reference-line",name:"reference-line",min:"1",max:"99",onInput:t[11]||(t[11]=(...e)=>n.updateParameters&&n.updateParameters(...e)),onBlur:t[12]||(t[12]=(...e)=>n.validateReferenceLine&&n.validateReferenceLine(...e))},null,544),[[l.Jo,o.referenceLine]])])])]),(0,a.Lk)("div",Lt,[(0,a.Lk)("div",yt,[(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.visualizationResults&&n.visualizationResults(...e))},"Visualization results"),(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.statisticalResults&&n.statisticalResults(...e))},"Statistical results")]),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.goBack&&n.goBack(...e)),class:"back-button"},"Back")]),o.modeDescriptions.length?((0,a.uX)(),(0,a.CE)("div",bt,[(0,a.Lk)("h2",null,"Pattern identification: "+(0,F.v_)(o.selectedMode),1),(0,a.Lk)("div",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.modeDescriptions,((e,t)=>((0,a.uX)(),(0,a.CE)("p",{key:t},(0,F.v_)(e),1)))),128))])])):(0,a.Q3)("",!0),o.showVisualizationResults?((0,a.uX)(),(0,a.CE)("div",St,[Ct,(0,a.Lk)("video",{src:o.processedVideoUrl,controls:"",class:"result-video"},null,8,zt),o.resultImageUrls.length?((0,a.uX)(),(0,a.CE)("div",It,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.resultImageUrls,((e,t)=>((0,a.uX)(),(0,a.CE)("img",{key:t,src:e,alt:"Result Image",class:"result-image"},null,8,wt)))),128))])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),o.showStatisticalResults?((0,a.uX)(),(0,a.CE)("div",Et,[Ft,(0,a.Lk)("table",At,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.statisticsData,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,((e,t)=>((0,a.uX)(),(0,a.CE)("td",{key:t},(0,F.v_)(e),1)))),128))])))),128))])])):(0,a.Q3)("",!0),o.isLoading?((0,a.uX)(),(0,a.CE)("div",Dt,$t)):(0,a.Q3)("",!0)])}var Xt={name:"VideoAnalysis",data(){return{actualSize:1,unit:"mm",timeSpan:1,flowDirection:"left-to-right",referenceLine:30,showVisualizationResults:!1,showStatisticalResults:!1,processedVideoUrl:"",modeDescriptions:[],selectedMode:this.$route.query.selectedMode||"",isLoading:!1,resultImageUrls:[]}},methods:{updateModeDescriptions(e=0,t=0){const i=this.$route.query.selectedMode,l=(e/this.timeSpan).toFixed(2),a=((e+t)/this.timeSpan).toFixed(2);this.modeDescriptions="Cell encapsulation"===i||"Single-cell encapsulated"===i||"Double emulsion"===i?[`Effective frequency: ${l}`,`Production frequency: ${a}`]:"Single droplet"===i?[`Effective frequency: ${l}`]:[],console.log("Updated modeDescriptions:",this.modeDescriptions)},updateParameters(){console.log(`Actual Size per Pixel: ${this.actualSize}, Unit: ${this.unit}`),console.log(`Real Time Span of the Video: ${this.timeSpan} seconds`),console.log(`Flow Direction: ${this.flowDirection}`),console.log(`Reference Line Location: ${this.referenceLine}`)},async visualizationResults(){this.isLoading=!0;const e={filename:this.$route.query.filename,selectedMode:this.$route.query.selectedMode,selectedAlgorithm:this.$route.query.selectedAlgorithm,actualSize:this.actualSize,unit:this.unit,timeSpan:this.timeSpan,flowDirection:this.flowDirection,referenceLine:this.referenceLine};try{const t=await ae.A.post("/api/video_visualize",e);console.log("API Response:",t.data);const i=t.data.withcount,l=t.data.withoutcount;this.processedVideoUrl=`${t.data.video_path}?size=${this.actualSize}&unit=${this.unit}`,this.updateModeDescriptions(i,l),this.resultImageUrls=t.data.image_names.map((e=>`${e}?size=${this.actualSize}&unit=${this.unit}`)),this.showVisualizationResults=!0}catch(t){console.error("Visualization failed:",t),alert("Failed to fetch visualization results. Please try again later.")}finally{this.isLoading=!1}},async statisticalResults(){this.isLoading=!0;const e={filename:this.$route.query.filename,actualSize:this.actualSize,unit:this.unit,timeSpan:this.timeSpan,flowDirection:this.flowDirection,referenceLine:this.referenceLine,selectedMode:this.$route.query.selectedMode,selectedAlgorithm:this.$route.query.selectedAlgorithm};try{const t=await ae.A.post("/api/video_statistics",e);console.log("API Response:",t.data);const i=t.data.withcount,l=t.data.withoutcount;this.statisticsData=t.data.statistics,this.updateModeDescriptions(i,l),this.showStatisticalResults=!0}catch(t){console.error("Statistics failed:",t),alert("Failed to fetch statistical results. Please try again later.")}finally{this.isLoading=!1}},goBack(){this.$router.push({name:"MachineIdentification"})},validateActualSize(){this.actualSize<.1&&(this.actualSize=.1)},validateTimeSpan(){this.timeSpan<.1&&(this.timeSpan=.1)},validateReferenceLine(){this.referenceLine<1?this.referenceLine=1:this.referenceLine>99&&(this.referenceLine=99)}}};const Rt=(0,r.A)(Xt,[["render",Ut],["__scopeId","data-v-320ece36"]]);var Pt=Rt;const Vt=[{path:"/",name:"HomePage",component:E,props:!0},{path:"/machine-identification",name:"MachineIdentification",component:ne,props:!0},{path:"/transfer-learning",name:"TransferLearning",component:fe},{path:"/image-analysis",name:"ImageAnalysis",component:Ke,props:!0},{path:"/video-analysis",name:"VideoAnalysis",component:Pt,props:!0}],_t=(0,d.aE)({history:(0,d.LA)("/"),routes:Vt});var Bt=_t;const qt=(0,l.Ef)(u);qt.use(Bt),qt.mount("#app")}},t={};function i(l){var a=t[l];if(void 0!==a)return a.exports;var s=t[l]={exports:{}};return e[l].call(s.exports,s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,l,a,s){if(!l){var o=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],s=e[u][2];for(var n=!0,r=0;r<l.length;r++)(!1&s||o>=s)&&Object.keys(i.O).every((function(e){return i.O[e](l[r])}))?l.splice(r--,1):(n=!1,s<o&&(o=s));if(n){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[l,a,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,s,o=l[0],n=l[1],r=l[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(r)var u=r(i)}for(t&&t(l);c<o.length;c++)s=o[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(u)},l=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[504],(function(){return i(2777)}));l=i.O(l)})();
//# sourceMappingURL=app.bf912b9b.js.map